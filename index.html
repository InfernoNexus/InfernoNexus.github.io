<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Newton & Gravity</title>

<style>
body {
  margin: 0;
  text-align: center;
  font-family: Arial;
  background: linear-gradient(#9fdcff, #eef9ff);
}

canvas {
  display: block;
  margin: auto;
  background: #87ceeb;
  border: 4px solid #000;
  border-radius: 32px;
}

/* Controls Layout */
#controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 30px;
  margin-top: 25px;
  width: 100%;
}

/* Arrow buttons */
.control-btn {
  width: 90px;
  height: 90px;
  border-radius: 20px;
  border: none;
  font-size: 40px;
  color: white;
  background: linear-gradient(145deg, #ff4b4b, #b30000);
  box-shadow: 0 8px 18px rgba(0,0,0,0.35);
  cursor: pointer;
  transition: all 0.2s ease;
}

.control-btn:active {
  transform: scale(0.92);
}

/* Restart button */
#restartBtn {
  display: block;
  margin: 25px auto 40px auto;
  padding: 20px 50px;
  font-size: 24px;
  font-weight: bold;
  border-radius: 40px;
  border: none;
  color: white;
  background: linear-gradient(145deg, #ff2e2e, #990000);
  box-shadow: 0 10px 25px rgba(0,0,0,0.4);
  cursor: pointer;
  transition: all 0.2s ease;
}

#restartBtn:active {
  transform: scale(0.95);
}
</style>
</head>

<body>

<h2>üçé Newton & Gravity üçé</h2>

<canvas id="game" width="520" height="620"></canvas>

<div id="controls">
  <button class="control-btn" onclick="moveLeft()">‚¨Ö</button>
  <button class="control-btn" onclick="moveRight()">‚û°</button>
</div>

<button id="restartBtn" onclick="restartGame()">Restart Game</button>

<audio id="bgm" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_0f7c38a88e.mp3">
</audio>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const music = document.getElementById("bgm");

let newtonX = 215;
let appleX = Math.random() * 480;
let appleY = 0;

let score = 0;
let speed = 5;
let gameOver = false;
let isGolden = false;

let clouds = [
  { x: 50, y: 80, speed: 0.3 },
  { x: 250, y: 120, speed: 0.2 },
  { x: 400, y: 60, speed: 0.25 }
];

/* Keyboard Controls */
document.addEventListener("keydown", function(e) {
  if (e.key === "ArrowLeft") moveLeft();
  if (e.key === "ArrowRight") moveRight();
});

function moveLeft() {
  if (newtonX > 20) newtonX -= 25;
}

function moveRight() {
  if (newtonX < 410) newtonX += 25;
}

/* Background */
function drawBackground() {
  const trunkGrad = ctx.createLinearGradient(90, 260, 135, 260);
  trunkGrad.addColorStop(0, "#4e342e");
  trunkGrad.addColorStop(1, "#6d4c41");
  ctx.fillStyle = trunkGrad;
  ctx.fillRect(90, 260, 45, 220);

  const leafGrad = ctx.createRadialGradient(112, 220, 20, 112, 240, 95);
  leafGrad.addColorStop(0, "#66bb6a");
  leafGrad.addColorStop(1, "#1b5e20");
  ctx.beginPath();
  ctx.arc(112, 240, 95, 0, Math.PI * 2);
  ctx.fillStyle = leafGrad;
  ctx.fill();
}

function drawGrass() {
  const grad = ctx.createLinearGradient(0, 440, 0, canvas.height);
  grad.addColorStop(0, "#4caf50");
  grad.addColorStop(1, "#2e7d32");
  ctx.fillStyle = grad;
  ctx.fillRect(0, 440, canvas.width, canvas.height);
}

function drawClouds() {
  ctx.fillStyle = "rgba(255,255,255,0.9)";
  clouds.forEach(c => {
    ctx.beginPath();
    ctx.arc(c.x, c.y, 20, 0, Math.PI * 2);
    ctx.arc(c.x + 25, c.y + 5, 25, 0, Math.PI * 2);
    ctx.arc(c.x + 55, c.y, 20, 0, Math.PI * 2);
    ctx.fill();
    c.x += c.speed;
    if (c.x > canvas.width + 60) c.x = -60;
  });
}

function drawNewton() {
  ctx.fillStyle = "#6b3f2a";
  ctx.fillRect(newtonX, 455, 100, 95);

  ctx.beginPath();
  ctx.arc(newtonX + 50, 420, 26, 0, Math.PI * 2);
  ctx.fillStyle = "#f1c27d";
  ctx.fill();
}

function drawApple() {
  ctx.beginPath();
  ctx.arc(appleX, appleY, 15, 0, Math.PI * 2);
  ctx.fillStyle = isGolden ? "gold" : "red";
  ctx.fill();
}

function resetApple() {
  appleY = 0;
  appleX = 30 + Math.random() * (canvas.width - 60);
  isGolden = Math.random() < 0.2;
}

function restartGame() {
  score = 0;
  speed = 5;
  gameOver = false;
  resetApple();
  music.volume = 0.5;
  music.play();
  gameLoop();
}

function gameLoop() {
  if (gameOver) {
    ctx.fillStyle = "rgba(0,0,0,0.6)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "white";
    ctx.font = "30px Arial";
    ctx.fillText("Game Over", 170, 300);
    return;
  }

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawClouds();
  drawBackground();
  drawGrass();
  drawNewton();
  drawApple();

  ctx.fillStyle = "black";
  ctx.font = "18px Arial";
  ctx.fillText("Score: " + score, 20, 30);

  appleY += speed;

  if (appleY > 440 && appleX > newtonX && appleX < newtonX + 100) {
    score += isGolden ? 5 : 1;
    if (score % 4 === 0) speed++;
    resetApple();
  }

  if (appleY > canvas.height) {
    gameOver = true;
    music.pause();
  }

  requestAnimationFrame(gameLoop);
}

resetApple();
gameLoop();
</script>

</body>
</html>