<!DOCTYPE html>  <html>    <head>    
<meta name="viewport" content="width=device-width, initial-scale=1.0">    
<title>Newton & Gravity</title>    
<style>    
body { margin: 0; text-align: center; font-family: Arial; background: #b0e2ff; }
canvas { display: block; margin: auto; background: #87ceeb; border: 4px solid #000; border-radius: 32px; width: 95%; max-width: 520px; }

/* Keeping your current stacked positioning */
#controls {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 15px;
}

/* Circular 3D Buttons */
#leftBtn, #rightBtn {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 3px solid #ffe066; /* Golden edge */
    background: radial-gradient(circle at 30% 30%, #ff6b6b, #800000 80%); /* 3D Sphere shading */
    color: white;
    font-size: 30px;
    font-weight: bold;
    cursor: pointer;
    position: relative;
    /* This creates the heavy 3D base and the initial glow */
    box-shadow: 
        0 6px 0 #550000, 
        0 0 20px rgba(255, 215, 0, 0.9); 
    display: flex; align-items: center; justify-content: center;
    outline: none;
    -webkit-tap-highlight-color: transparent;
    transition: transform 0.1s;
}

/* The Intense Golden Aura (The Ring) */
#leftBtn::before, #rightBtn::before {
    content: '';
    position: absolute;
    top: -8px; left: -8px; right: -8px; bottom: -8px; /* Larger than button */
    border-radius: 50%;
    border: 4px solid #ffd700;
    /* Layered glow: inner glow, outer glow, and a blur */
    box-shadow: 
        0 0 15px #ffcc00, 
        inset 0 0 10px #ffcc00;
    animation: aura-glow 1.5s infinite ease-in-out;
    pointer-events: none;
}

@keyframes aura-glow {
    0% { transform: scale(1); opacity: 0.6; filter: blur(1px); }
    50% { transform: scale(1.1); opacity: 1; filter: blur(2px); }
    100% { transform: scale(1); opacity: 0.6; filter: blur(1px); }
}

/* Restart Button */
.restart-btn {
    margin-top: 15px;
    font-size: 20px;
    font-weight: bold;
    padding: 12px 30px;
    border-radius: 12px;
    border: 3px solid #ffe066;
    background: linear-gradient(#ff4d4d, #990000);
    color: white;
    box-shadow: 0 5px #550000, 0 0 20px rgba(255, 215, 0, 0.6);
    cursor: pointer;
}

#leftBtn:active, #rightBtn:active, .restart-btn:active {
    transform: translateY(4px);
    box-shadow: 0 2px #330000;
}

</style>

</head>    
<body>  <h2>üçé Newton & Gravity üçé</h2>    
<canvas id="game" width="520" height="620"></canvas>  <div id="mobile-ui">    
  <div id="controls">    
    <button id="leftBtn">‚óÄ</button>    
    <button id="rightBtn">‚ñ∂</button>    
  </div>    
  <button class="restart-btn" onclick="restartGame()">Restart Game</button>    
</div>  <audio id="bgm" loop>    
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_0f7c38a88e.mp3?filename=peaceful-garden-12257.mp3">    
</audio>  <script>  
let bombs = [];
let bombImg = new Image();
bombImg.src = 'bomb.png';
let newtonImg = new Image();
newtonImg.src = 'newton.png'; // New Image

// Audio setup
const music = document.getElementById("bgm");
const clickSound = new Audio("https://www.soundjay.com/buttons/sounds/button-16.mp3");

function playClick() {
    clickSound.currentTime = 0;
    clickSound.play();
}

let windTime = 0;
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// ---------------- VARIABLES ----------------
let newtonX = 215;
let appleX = Math.random() * 480;
let appleY = 0;
let score = 0;
let speed = 5;
let lives = 1;
let gameOver = false;
let isGolden = false;

const keys = { left: false, right: false };

let clouds = [
    { x: 50, y: 80, speed: 0.3 },
    { x: 250, y: 120, speed: 0.2 },
    { x: 400, y: 60, speed: 0.25 }
];

// ---------------- TEXTURES (Your Original Styles) ----------------
const barkTexture = document.createElement("canvas");
barkTexture.width = 45; barkTexture.height = 220;
const barkCtx = barkTexture.getContext("2d");
barkCtx.fillStyle = "#6d4c41";
barkCtx.fillRect(0,0,45,220);
for(let i=0; i<70; i++){
    barkCtx.strokeStyle = "rgba(0,0,0,0.2)";
    barkCtx.beginPath();
    let x = Math.random()*45;
    barkCtx.moveTo(x,0); barkCtx.lineTo(x + Math.random()*2-1, 220);
    barkCtx.stroke();
}

const grassTexture = document.createElement("canvas");
grassTexture.width = 520; grassTexture.height = 180;
const grassCtx = grassTexture.getContext("2d");
const g = grassCtx.createLinearGradient(0,0,0,180);
g.addColorStop(0,"#4caf50"); g.addColorStop(1,"#2e7d32");
grassCtx.fillStyle = g;
grassCtx.fillRect(0,0,520,180);
for(let i=0; i<450; i++){
    let x = Math.random()*520;
    let h = 10 + Math.random()*18;
    grassCtx.strokeStyle="rgba(0,70,0,0.35)";
    grassCtx.beginPath();
    grassCtx.moveTo(x,180);
    grassCtx.quadraticCurveTo(x + Math.random()*6-3, 180-h/2, x + Math.random()*4-2, 180-h);
    grassCtx.stroke();
}

// ---------------- CONTROLS ----------------
const leftBtn = document.getElementById("leftBtn");
const rightBtn = document.getElementById("rightBtn");

leftBtn.addEventListener("touchstart", (e) => { e.preventDefault(); playClick(); keys.left = true; });
leftBtn.addEventListener("touchend", (e) => { e.preventDefault(); keys.left = false; });
rightBtn.addEventListener("touchstart", (e) => { e.preventDefault(); playClick(); keys.right = true; });
rightBtn.addEventListener("touchend", (e) => { e.preventDefault(); keys.right = false; });

// ---------------- DRAW FUNCTIONS ----------------
function drawApple(){
    // EXACT ORIGINAL APPLE DETAILS
    const appleGrad = ctx.createRadialGradient(appleX-4,appleY-6,2,appleX,appleY,16);
    appleGrad.addColorStop(0,isGolden?"#fff7b3":"#ff6b6b");
    appleGrad.addColorStop(1,isGolden?"#d4af37":"#b71c1c");
    ctx.fillStyle=appleGrad;
    ctx.beginPath(); ctx.arc(appleX,appleY,15,0,Math.PI*2); ctx.fill();
    
    // Original Shine
    ctx.beginPath(); ctx.arc(appleX-5,appleY-6,4,0,Math.PI*2); 
    ctx.fillStyle=isGolden?"#fff4a3":"#ffaaaa"; ctx.fill();
    
    // Original Stem
    ctx.fillStyle="brown"; ctx.fillRect(appleX-1,appleY-22,2,10);
}

function drawNewton(){
    // Shadow from original code
    ctx.fillStyle="rgba(0,0,0,0.25)";
    ctx.beginPath(); ctx.ellipse(newtonX+50,565,42,10,0,0,Math.PI*2); ctx.fill();
    
    // NEWTON IMAGE REPLACEMENT
    // Drawing him at the bigger size you asked for
    ctx.drawImage(newtonImg, newtonX, 370, 150, 195); 
}

function spawnBomb() {
    // REDUCED SPAWN RATE (Balanced)
    if (Math.random() < 0.015) { 
        bombs.push({
            x: Math.random() * (canvas.width - 40),
            y: -50,
            size: 45,
            speed: 4 + Math.random() * 2
        });
    }
}

function updateBombs() {
    for (let i = bombs.length - 1; i >= 0; i--) {
        let b = bombs[i];
        b.y += b.speed;
        
        ctx.save();
        ctx.globalCompositeOperation = 'multiply';
        ctx.drawImage(bombImg, b.x, b.y, b.size, b.size);
        ctx.restore();

        // Collision detection for bigger Newton
        if (b.x < newtonX + 130 && b.x + b.size > newtonX + 20 &&
            b.y > 370 && b.y < 560) {
            gameOver = true;
            music.pause();
        }
        if (b.y > canvas.height) bombs.splice(i, 1);
    }
}

function drawGrass(){ ctx.drawImage(grassTexture,0,440); }
function drawClouds(){
    ctx.fillStyle="rgba(255,255,255,0.9)";
    clouds.forEach(c=>{
        ctx.beginPath(); ctx.arc(c.x,c.y,20,0,Math.PI*2);
        ctx.arc(c.x+25,c.y+5,25,0,Math.PI*2);
        ctx.arc(c.x+55,c.y,20,0,Math.PI*2); ctx.fill();
        c.x+=c.speed; if(c.x>canvas.width+60) c.x=-60;
    });
}
function drawBackground(){
    ctx.drawImage(barkTexture, 90, 260);
    const sway = Math.sin(windTime) * 5;
    ctx.save(); ctx.translate(sway, 0);
    const leafGrad = ctx.createRadialGradient(112,220,30,112,240,100);
    leafGrad.addColorStop(0,"#81c784");
    leafGrad.addColorStop(1,"#1b5e20");
    ctx.fillStyle = leafGrad;
    ctx.beginPath(); ctx.arc(112,230,80,0,Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.arc(150,250,70,0,Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.arc(70,250,70,0,Math.PI*2); ctx.fill();
    ctx.restore(); 
}

// ---------------- GAME LOGIC ----------------
function resetApple(){
    appleY=-20;
    appleX = 40 + Math.random() * (canvas.width - 80);
    isGolden = Math.random() < 0.2;
}

function restartGame(){
    playClick();
    score=0; speed=5; gameOver=false;
    bombs = []; 
    resetApple();
    music.currentTime = 0; music.play();
    gameLoop();
}

function gameLoop(){
    if(gameOver){
        ctx.fillStyle="rgba(0,0,0,0.7)"; ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle="white"; ctx.textAlign="center";
        ctx.font="bold 40px Arial"; ctx.fillText("GAME OVER", canvas.width/2, 300);
        ctx.font="24px Arial"; ctx.fillText("Score: " + score, canvas.width/2, 350);
        return;
    }

    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawClouds(); drawBackground(); drawGrass(); drawNewton(); drawApple();
    
    spawnBomb();
    updateBombs();

    if (keys.left && newtonX > -50) newtonX -= 8;
    if (keys.right && newtonX < canvas.width - 100) newtonX += 8;

    ctx.fillStyle="black"; ctx.textAlign="left";
    ctx.font="bold 22px Arial"; ctx.fillText("Score: "+score, 20, 40);

    appleY += speed;
    // Catch Check for bigger Newton
    if(appleY > 400 && appleY < 500 && appleX > newtonX && appleX < newtonX + 150){
        score += isGolden ? 5 : 1;
        if(score % 10 === 0) speed += 0.5;
        resetApple();
    }
    if(appleY > canvas.height){ gameOver=true; music.pause(); }
    windTime += 0.03;
    requestAnimationFrame(gameLoop);
}

// ---------------- START ----------------
resetApple();
gameLoop();

</script>  </body>

</html>  