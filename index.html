<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Newton's Gravity Catch</title>

<style>
body {
    margin: 0;
    overflow: hidden;
    font-family: Arial, sans-serif;
    background: linear-gradient(#f7d7a1, #d7f0a3);
}

#gameCanvas {
    background: linear-gradient(#f7d7a1, #d7f0a3);
    display: block;
    margin: auto;
    border: 8px solid #3a7d2f;
    border-radius: 20px;
}

#ui {
    position: absolute;
    top: 10px;
    left: 20px;
    color: white;
    font-size: 20px;
    font-weight: bold;
}

#restartBtn {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 20px;
    font-size: 18px;
    background: #e74c3c;
    border: none;
    border-radius: 10px;
    color: white;
    cursor: pointer;
}
</style>
</head>

<body>

<div id="ui">
Score: <span id="score">0</span> |
Lives: <span id="lives">3</span>
</div>

<button id="restartBtn">Restart Game</button>

<canvas id="gameCanvas" width="480" height="640"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let score = 0;
let lives = 3;
let apples = [];
let gameOver = false;

const newton = {
    x: 200,
    y: 550,
    width: 60,
    height: 80,
    speed: 6
};

// üé© Draw Newton (cartoon style like image)
function drawNewton() {
    ctx.fillStyle = "#8B4513"; // coat
    ctx.fillRect(newton.x, newton.y, newton.width, newton.height);

    ctx.fillStyle = "#F5DEB3"; // face
    ctx.fillRect(newton.x + 15, newton.y - 30, 30, 30);

    ctx.fillStyle = "white"; // wig
    ctx.fillRect(newton.x + 10, newton.y - 40, 40, 10);
}

// üçé Draw Apple
function drawApple(apple) {
    ctx.beginPath();
    ctx.arc(apple.x, apple.y, 15, 0, Math.PI * 2);

    if (apple.type === "gold") {
        ctx.fillStyle = "gold";
    } else {
        ctx.fillStyle = "red";
    }

    ctx.fill();
    ctx.closePath();
}

// üå≥ Background Tree (simple cartoon style)
function drawTree() {
    ctx.fillStyle = "#8B4513";
    ctx.fillRect(200, 150, 40, 150);

    ctx.beginPath();
    ctx.arc(220, 120, 100, 0, Math.PI * 2);
    ctx.fillStyle = "green";
    ctx.fill();
}

// üçè Spawn apples
function spawnApple() {
    let type = Math.random() < 0.2 ? "gold" : "normal";

    apples.push({
        x: Math.random() * (canvas.width - 30) + 15,
        y: 0,
        speed: 2 + Math.random() * 2,
        type: type
    });
}

// üéÆ Game loop
function update() {
    if (gameOver) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    drawTree();
    drawNewton();

    apples.forEach((apple, index) => {
        apple.y += apple.speed;
        drawApple(apple);

        // collision detection
        if (
            apple.y > newton.y &&
            apple.x > newton.x &&
            apple.x < newton.x + newton.width
        ) {
            if (apple.type === "gold") {
                score += 5;
            } else {
                score += 1;
            }
            apples.splice(index, 1);
        }

        // missed apple
        if (apple.y > canvas.height) {
            lives--;
            apples.splice(index, 1);
        }
    });

    document.getElementById("score").innerText = score;
    document.getElementById("lives").innerText = lives;

    if (lives <= 0) {
        gameOver = true;
        alert("Game Over! Final Score: " + score);
    }

    requestAnimationFrame(update);
}

// ‚å® Controls
document.addEventListener("keydown", function(e) {
    if (e.key === "ArrowLeft" && newton.x > 0) {
        newton.x -= newton.speed;
    }
    if (e.key === "ArrowRight" && newton.x < canvas.width - newton.width) {
        newton.x += newton.speed;
    }
});

// üì± Touch Controls
canvas.addEventListener("touchmove", function(e) {
    let touchX = e.touches[0].clientX;
    newton.x = touchX - canvas.offsetLeft - newton.width / 2;
});

// üîÑ Restart
document.getElementById("restartBtn").addEventListener("click", function() {
    score = 0;
    lives = 3;
    apples = [];
    gameOver = false;
    update();
});

// Spawn apples every second
setInterval(spawnApple, 1000);

// Start game
update();
</script>

</body>
</html>