<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Newton & Gravity</title>

<style>
body{
  margin:0;
  text-align:center;
  font-family:Arial;
  background:linear-gradient(#9fdcff,#eef9ff);
}

canvas{
  display:block;
  margin:20px auto;
  background:#87ceeb;
  border:4px solid #000;
  border-radius:30px;
  width:95%;
  max-width:520px;
  height:auto;
}

#controls{
  display:flex;
  justify-content:center;
  gap:30px;
  margin-top:20px;
}

.control-btn{
  width:80px;
  height:80px;
  border-radius:18px;
  border:none;
  font-size:36px;
  color:white;
  background:linear-gradient(145deg,#ff4b4b,#b30000);
  box-shadow:0 8px 20px rgba(0,0,0,0.35);
  cursor:pointer;
}

.control-btn:active{
  transform:scale(0.9);
}

#restartBtn{
  margin:30px auto 40px;
  padding:18px 60px;
  font-size:22px;
  font-weight:bold;
  border-radius:40px;
  border:none;
  color:white;
  background:linear-gradient(145deg,#ff2e2e,#990000);
  box-shadow:0 10px 25px rgba(0,0,0,0.4);
  cursor:pointer;
}

#restartBtn:active{
  transform:scale(0.95);
}
</style>
</head>

<body>

<h2>üçé Newton & Gravity üçé</h2>

<canvas id="game"></canvas>

<div id="controls">
  <button class="control-btn" onclick="moveLeft()">‚¨Ö</button>
  <button class="control-btn" onclick="moveRight()">‚û°</button>
</div>

<button id="restartBtn" onclick="restartGame()">Restart Game</button>

<audio id="bgm" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_0f7c38a88e.mp3">
</audio>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const music = document.getElementById("bgm");

/* Responsive Canvas */
function resizeCanvas(){
  const width = Math.min(window.innerWidth*0.95,520);
  canvas.width = width;
  canvas.height = width*1.2;
}
resizeCanvas();
window.addEventListener("resize",resizeCanvas);

let newtonX = 200;
let appleX = 100;
let appleY = 0;
let score = 0;
let speed = 4;
let gameOver = false;

/* Controls */
document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft") moveLeft();
  if(e.key==="ArrowRight") moveRight();
});

function moveLeft(){
  if(newtonX>20) newtonX-=25;
}
function moveRight(){
  if(newtonX<canvas.width-120) newtonX+=25;
}

/* ---------- BACKGROUND ---------- */
function drawBackground(){

  // Sky
  ctx.fillStyle="#87ceeb";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Tree trunk gradient
  const trunkGrad = ctx.createLinearGradient(90,260,135,260);
  trunkGrad.addColorStop(0,"#4e342e");
  trunkGrad.addColorStop(1,"#6d4c41");
  ctx.fillStyle = trunkGrad;
  ctx.fillRect(90,260,45,220);

  // Bark texture
  for(let i=0;i<20;i++){
    ctx.strokeStyle="rgba(0,0,0,0.25)";
    const y=260+Math.random()*220;
    ctx.beginPath();
    ctx.moveTo(90,y);
    ctx.lineTo(135,y+Math.random()*6-3);
    ctx.stroke();
  }

  // Leaves gradient
  const leafGrad = ctx.createRadialGradient(112,220,20,112,240,95);
  leafGrad.addColorStop(0,"#66bb6a");
  leafGrad.addColorStop(1,"#1b5e20");
  ctx.beginPath();
  ctx.arc(112,240,95,0,Math.PI*2);
  ctx.fillStyle=leafGrad;
  ctx.fill();

  // Grass
  const grassGrad = ctx.createLinearGradient(0,canvas.height-150,0,canvas.height);
  grassGrad.addColorStop(0,"#4caf50");
  grassGrad.addColorStop(1,"#2e7d32");
  ctx.fillStyle=grassGrad;
  ctx.fillRect(0,canvas.height-150,canvas.width,150);
}

/* ---------- NEWTON ---------- */
function drawNewton(){
  const baseY = canvas.height - 150;

  // Coat
  ctx.fillStyle="#5d4037";
  ctx.fillRect(newtonX, baseY-100, 90, 100);

  // Head
  ctx.beginPath();
  ctx.arc(newtonX+45, baseY-120, 30, 0, Math.PI*2);
  ctx.fillStyle="#f1c27d";
  ctx.fill();

  // Hair
  ctx.beginPath();
  ctx.arc(newtonX+45, baseY-140, 30, Math.PI, 0);
  ctx.fillStyle="#4e342e";
  ctx.fill();

  // Eyes
  ctx.fillStyle="black";
  ctx.beginPath();
  ctx.arc(newtonX+35, baseY-120, 4, 0, Math.PI*2);
  ctx.arc(newtonX+55, baseY-120, 4, 0, Math.PI*2);
  ctx.fill();
}

/* ---------- APPLE ---------- */
function drawApple(){
  ctx.beginPath();
  ctx.arc(appleX,appleY,15,0,Math.PI*2);
  ctx.fillStyle="red";
  ctx.fill();
}

/* ---------- GAME LOOP ---------- */
function resetApple(){
  appleY=0;
  appleX=30+Math.random()*(canvas.width-60);
}

function restartGame(){
  score=0;
  speed=4;
  gameOver=false;
  resetApple();
  music.play();
  loop();
}

function loop(){
  if(gameOver){
    ctx.fillStyle="rgba(0,0,0,0.6)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="white";
    ctx.font="30px Arial";
    ctx.fillText("Game Over",canvas.width/2-80,canvas.height/2);
    return;
  }

  drawBackground();
  drawNewton();
  drawApple();

  ctx.fillStyle="black";
  ctx.font="18px Arial";
  ctx.fillText("Score: "+score,20,30);

  appleY+=speed;

  if(appleY>canvas.height-150 &&
     appleX>newtonX &&
     appleX<newtonX+90){
    score++;
    resetApple();
  }

  if(appleY>canvas.height){
    gameOver=true;
    music.pause();
  }

  requestAnimationFrame(loop);
}

resetApple();
loop();
</script>

</body>
</html>